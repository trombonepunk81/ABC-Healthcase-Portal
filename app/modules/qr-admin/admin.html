export async function render(root, CONFIG){
  root.innerHTML = `<div id="qr-admin-root" style="padding:0"></div>`;
  const html = await (await fetch('./modules/qr-admin/admin.html', {cache:'no-store'})).text();
  document.getElementById('qr-admin-root').innerHTML = html;

  const libs = [
    "https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js",
    "https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js",
    "https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js",
    "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
  ];
  for (const src of libs){
    await new Promise(res=>{ const s=document.createElement('script'); s.src=src; s.onload=res; document.body.appendChild(s); });
  }

  // Bind generator constants to platform config
  const patch = document.createElement('script');
  patch.textContent = `
    window.PORTAL_URL = ${JSON.stringify(CONFIG.portalUrl)};
    window.ASSETS_JSON_URL = ${JSON.stringify(CONFIG.assetsJson)};
  `;
  document.body.appendChild(patch);

  // Paste your original inline JS (from qr-generator.html) into admin.logic.js
  const logic = await (await fetch('./modules/qr-admin/admin.logic.js', {cache:'no-store'})).text();
  const script = document.createElement('script');
  script.type = 'module';
  script.textContent = logic;
  document.body.appendChild(script);
}
``
