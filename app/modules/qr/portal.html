<!-- QR Portal Module: Asset Browser & QR Link Tester -->
<style>
  .qr-portal { font-family: 'DM Sans', sans-serif; color: #0f172a; }
  .qr-portal-header {
    background: linear-gradient(135deg, #0f172a 0%, #334155 100%);
    padding: 1.5rem 2rem;
    border-radius: 16px 16px 0 0;
    position: relative; overflow: hidden;
  }
  .qr-portal-header::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(ellipse 80% 50% at 20% 40%, rgba(20,184,166,0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 60%, rgba(245,158,11,0.08) 0%, transparent 50%);
    pointer-events: none;
  }
  .qr-portal-header > * { position: relative; z-index: 1; }
  .qr-portal-header h2 {
    font-family: 'Instrument Serif', serif;
    font-size: 1.75rem; font-weight: 400; color: #fff; margin: 0 0 0.25rem;
  }
  .qr-portal-header p { color: #94a3b8; font-size: 0.9rem; margin: 0; }
  .qr-portal-body { padding: 1.5rem 2rem 2rem; }

  .qr-search-row { display: flex; gap: 0.75rem; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; }
  .qr-search-input {
    flex: 1; min-width: 200px;
    padding: 0.75rem 1rem 0.75rem 2.5rem;
    border: 1px solid #e2e8f0; border-radius: 10px;
    font-family: inherit; font-size: 0.9rem;
    background: #f8fafc url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%2394a3b8' stroke-width='2' viewBox='0 0 24 24'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.35-4.35'/%3E%3C/svg%3E") 0.875rem center no-repeat;
    transition: border-color 0.2s;
  }
  .qr-search-input:focus { outline: none; border-color: #2dd4bf; background-color: #fff; }
  .qr-stat-pill {
    display: inline-flex; align-items: center; gap: 0.35rem;
    padding: 0.5rem 0.875rem; border-radius: 20px;
    font-size: 0.8rem; font-weight: 600;
    background: #f1f5f9; color: #475569;
  }
  .qr-stat-pill.teal { background: rgba(20,184,166,0.1); color: #0d9488; }

  .qr-filter-row { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1.25rem; }
  .qr-chip {
    padding: 0.4rem 0.875rem; border-radius: 20px;
    border: 1px solid #e2e8f0; background: #fff;
    font-size: 0.8rem; cursor: pointer; transition: all 0.2s; font-family: inherit;
  }
  .qr-chip:hover { border-color: #2dd4bf; }
  .qr-chip.active { background: #0f172a; color: #2dd4bf; border-color: #0f172a; }

  .qr-table-wrap { max-height: 480px; overflow-y: auto; border-radius: 12px; border: 1px solid #e2e8f0; }
  .qr-asset-table { width: 100%; border-collapse: collapse; }
  .qr-asset-table th {
    text-align: left; font-size: 0.7rem; font-weight: 600;
    letter-spacing: 0.08em; text-transform: uppercase;
    color: #94a3b8; padding: 0.75rem; border-bottom: 2px solid #e2e8f0;
    position: sticky; top: 0; background: #fff; z-index: 1;
  }
  .qr-asset-table td { padding: 0.75rem; border-bottom: 1px solid #f1f5f9; font-size: 0.85rem; }
  .qr-asset-table tr:hover td { background: #f8fafc; }

  .qr-asset-meta {
    display: inline-block; padding: 0.15rem 0.5rem; border-radius: 4px;
    font-size: 0.75rem; background: #f1f5f9; color: #475569;
  }
  .qr-asset-meta.cat { background: rgba(20,184,166,0.1); color: #0d9488; }

  .qr-link-btn {
    display: inline-flex; align-items: center; gap: 0.3rem;
    padding: 0.35rem 0.65rem; border-radius: 6px; border: none;
    font-size: 0.75rem; font-weight: 600; cursor: pointer;
    transition: all 0.2s; font-family: inherit; white-space: nowrap;
  }
  .qr-link-btn.test { background: linear-gradient(135deg, #0d9488, #14b8a6); color: #fff; }
  .qr-link-btn.test:hover { transform: translateY(-1px); box-shadow: 0 4px 12px -2px rgba(13,148,136,0.3); }
  .qr-link-btn.tandem { background: #f1f5f9; color: #475569; }
  .qr-link-btn.tandem:hover { background: #e2e8f0; }

  .qr-empty { text-align: center; padding: 3rem 1rem; color: #94a3b8; }
  .qr-empty-icon {
    width: 56px; height: 56px; border-radius: 50%; background: #f1f5f9;
    display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;
  }

  .qr-admin-links {
    display: flex; gap: 0.75rem; margin-top: 1.5rem; padding-top: 1.25rem;
    border-top: 1px solid #e2e8f0; flex-wrap: wrap;
  }
  .qr-admin-link {
    display: inline-flex; align-items: center; gap: 0.5rem;
    padding: 0.625rem 1.25rem; border-radius: 10px;
    text-decoration: none; font-size: 0.85rem; font-weight: 500; transition: all 0.2s;
  }
  .qr-admin-link.primary { background: linear-gradient(135deg, #0f172a, #334155); color: #2dd4bf; }
  .qr-admin-link.primary:hover { transform: translateY(-1px); box-shadow: 0 6px 20px -4px rgba(15,23,42,0.3); }
  .qr-admin-link.secondary { background: #fff; color: #475569; border: 1px solid #e2e8f0; }
  .qr-admin-link.secondary:hover { background: #f8fafc; }

  @keyframes qr-spin { to { transform: rotate(360deg); } }
</style>

<div class="qr-portal">
  <div class="qr-portal-header">
    <h2>QR Portal</h2>
    <p>Browse assets &amp; test QR scan links</p>
  </div>
  <div class="qr-portal-body">
    <div id="qr-loading" class="qr-empty">
      <div style="display:inline-block;width:24px;height:24px;border:3px solid #e2e8f0;border-top-color:#14b8a6;border-radius:50%;animation:qr-spin 0.8s linear infinite"></div>
      <p style="margin-top:0.75rem">Loading assets&hellip;</p>
    </div>

    <div id="qr-loaded" style="display:none">
      <div class="qr-search-row">
        <input type="text" class="qr-search-input" id="qr-search" placeholder="Search by asset ID, room, or level&hellip;">
        <span class="qr-stat-pill teal" id="qr-total-count">0 assets</span>
        <span class="qr-stat-pill" id="qr-showing-count">Showing 0</span>
      </div>
      <div class="qr-filter-row" id="qr-category-chips"></div>
      <div class="qr-table-wrap">
        <table class="qr-asset-table">
          <thead><tr>
            <th>Asset ID</th><th>Category</th><th>Level</th><th>Room</th><th style="text-align:right">Actions</th>
          </tr></thead>
          <tbody id="qr-asset-tbody"></tbody>
        </table>
      </div>
      <div id="qr-no-results" class="qr-empty" style="display:none">
        <div class="qr-empty-icon">
          <svg width="24" height="24" fill="none" stroke="#94a3b8" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
          </svg>
        </div>
        <p style="font-weight:500;color:#475569;margin-bottom:0.25rem">No matching assets</p>
        <p style="font-size:0.85rem">Try a different search term or clear your filters.</p>
      </div>
      <div class="qr-admin-links">
        <a href="../qr-generator.html" class="qr-admin-link primary">&#128295; Open QR Generator</a>
        <a href="../index.html" target="_blank" class="qr-admin-link secondary">&#128241; Preview Help Center</a>
      </div>
    </div>

    <div id="qr-error" class="qr-empty" style="display:none">
      <div class="qr-empty-icon" style="background:#fef2f2">
        <svg width="24" height="24" fill="none" stroke="#dc2626" stroke-width="2" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="10"/><path d="m15 9-6 6M9 9l6 6"/>
        </svg>
      </div>
      <p style="font-weight:500;color:#dc2626;margin-bottom:0.25rem">Failed to load assets</p>
      <p id="qr-error-msg" style="font-size:0.85rem">Check that assets.json is available.</p>
    </div>
  </div>
</div>
